import{uid as t}from"../../util/internals/uid.min.mjs";import{colorPropToSVG as i,matrixToSVG as s}from"../../util/misc/svgParsing.min.mjs";import{NONE as r}from"../../constants.min.mjs";import{isFiller as e}from"../../util/typeAssertions.min.mjs";class o{getSvgStyles(t){const s=this.fillRule?this.fillRule:"nonzero",e=this.strokeWidth?this.strokeWidth:"0",o=this.strokeDashArray?this.strokeDashArray.join(" "):r,n=this.strokeDashOffset?this.strokeDashOffset:"0",h=this.strokeLineCap?this.strokeLineCap:"butt",a=this.strokeLineJoin?this.strokeLineJoin:"miter",l=this.strokeMiterLimit?this.strokeMiterLimit:"4",c=void 0!==this.opacity?this.opacity:"1",p=this.visible?"":" visibility: hidden;",m=t?"":this.getSvgFilter(),d=i("fill",this.fill);return[i("stroke",this.stroke),"stroke-width: ",e,"; ","stroke-dasharray: ",o,"; ","stroke-linecap: ",h,"; ","stroke-dashoffset: ",n,"; ","stroke-linejoin: ",a,"; ","stroke-miterlimit: ",l,"; ",d,"fill-rule: ",s,"; ","opacity: ",c,";",m,p].join("")}getSvgFilter(){return this.shadow?"filter: url(#SVGID_".concat(this.shadow.id,");"):""}getSvgCommons(){return[this.id?'id="'.concat(this.id,'" '):"",this.clipPath?'clip-path="url(#'.concat(this.clipPath.clipPathId,')" '):""].join("")}getSvgTransform(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const r=t?this.calcTransformMatrix():this.calcOwnMatrix(),e='transform="'.concat(s(r));return"".concat(e).concat(i,'" ')}_toSVG(t){return[""]}toSVG(t){return this._createBaseSVGMarkup(this._toSVG(t),{reviver:t})}toClipPathSVG(t){return"\t"+this._createBaseClipPathSVGMarkup(this._toSVG(t),{reviver:t})}_createBaseClipPathSVGMarkup(t){let{reviver:i,additionalTransform:s=""}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=[this.getSvgTransform(!0,s),this.getSvgCommons()].join(""),e=t.indexOf("COMMON_PARTS");return t[e]=r,i?i(t.join("")):t.join("")}_createBaseSVGMarkup(i){let{noStyle:s,reviver:r,withShadow:o,additionalTransform:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const h=s?"":'style="'.concat(this.getSvgStyles(),'" '),a=o?'style="'.concat(this.getSvgFilter(),'" '):"",l=this.clipPath,c=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",p=l&&l.absolutePositioned,m=this.stroke,d=this.fill,g=this.shadow,u=[],S=i.indexOf("COMMON_PARTS");let f;l&&(l.clipPathId="CLIPPATH_".concat(t()),f='<clipPath id="'.concat(l.clipPathId,'" >\n').concat(l.toClipPathSVG(r),"</clipPath>\n")),p&&u.push("<g ",a,this.getSvgCommons()," >\n"),u.push("<g ",this.getSvgTransform(!1),p?"":a+this.getSvgCommons()," >\n");const v=[h,c,s?"":this.addPaintOrder()," ",n?'transform="'.concat(n,'" '):""].join("");return i[S]=v,e(d)&&u.push(d.toSVG(this)),e(m)&&u.push(m.toSVG(this)),g&&u.push(g.toSVG(this)),l&&u.push(f),u.push(i.join("")),u.push("</g>\n"),p&&u.push("</g>\n"),r?r(u.join("")):u.join("")}addPaintOrder(){return"fill"!==this.paintFirst?' paint-order="'.concat(this.paintFirst,'" '):""}}export{o as FabricObjectSVGExportMixin};
//# sourceMappingURL=FabricObjectSVGExportMixin.min.mjs.map
