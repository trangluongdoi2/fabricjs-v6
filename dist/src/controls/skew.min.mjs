import{objectSpread2 as e,objectWithoutProperties as i}from"../../_virtual/_rollupPluginBabelHelpers.min.mjs";import{resolveOrigin as n}from"../util/misc/resolveOrigin.min.mjs";import{Point as s}from"../Point.min.mjs";import{radiansToDegrees as r,degreesToRadians as t}from"../util/misc/radiansDegreesConversion.min.mjs";import{isLocked as o,NOT_ALLOWED_CURSOR as m,findCornerQuadrant as c,getLocalPoint as a}from"./util.min.mjs";import{wrapWithFireEvent as l}from"./wrapWithFireEvent.min.mjs";import{wrapWithFixedAnchor as g}from"./wrapWithFixedAnchor.min.mjs";import{CENTER as w}from"../constants.min.mjs";const k=["target","ex","ey","skewingSide"],f={x:{counterAxis:"y",scale:"scaleX",skew:"skewX",lockSkewing:"lockSkewingX",origin:"originX",flip:"flipX"},y:{counterAxis:"x",scale:"scaleY",skew:"skewY",lockSkewing:"lockSkewingY",origin:"originY",flip:"flipY"}},p=["ns","nesw","ew","nwse"],u=(e,i,n)=>{if(0!==i.x&&o(n,"lockSkewingY"))return m;if(0!==i.y&&o(n,"lockSkewingX"))return m;const s=c(n,i)%4;return"".concat(p[s],"-resize")};function x(m,c,p,u,x){const{target:X}=p,{counterAxis:d,origin:S,lockSkewing:j,skew:Y,flip:y}=f[m];if(o(X,j))return!1;const{origin:h,flip:_}=f[d],v=n(p[h])*(X[_]?-1:1),D=-Math.sign(v)*(X[y]?-1:1),b=.5*-((0===X[Y]&&a(p,w,w,u,x)[m]>0||X[Y]>0?1:-1)*D)+.5,A=l("skewing",g(((e,n,o,c)=>function(e,n,o){let{target:m,ex:c,ey:a,skewingSide:l}=n,g=i(n,k);const{skew:w}=f[e],p=o.subtract(new s(c,a)).divide(new s(m.scaleX,m.scaleY))[e],u=m[w],x=g[w],X=Math.tan(t(x)),d="y"===e?m._getTransformedDimensions({scaleX:1,scaleY:1,skewX:0}).x:m._getTransformedDimensions({scaleX:1,scaleY:1}).y,S=2*p*l/Math.max(d,1)+X,j=r(Math.atan(S));m.set(w,j);const Y=u!==m[w];if(Y&&"y"===e){const{skewX:e,scaleX:i}=m,n=m._getTransformedDimensions({skewY:u}),s=m._getTransformedDimensions(),r=0!==e?n.x/s.x:1;1!==r&&m.set("scaleX",r*i)}return Y}(m,n,new s(o,c)))));return A(c,e(e({},p),{},{[S]:b,skewingSide:D}),u,x)}const X=(e,i,n,s)=>x("x",e,i,n,s),d=(e,i,n,s)=>x("y",e,i,n,s);export{u as skewCursorStyleHandler,X as skewHandlerX,d as skewHandlerY};
//# sourceMappingURL=skew.min.mjs.map
