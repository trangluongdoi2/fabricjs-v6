import{NOT_ALLOWED_CURSOR as n,findCornerQuadrant as i,isLocked as s,getLocalPoint as e,isTransformCentered as t,invertOrigin as a}from"./util.min.mjs";import{wrapWithFireEvent as c}from"./wrapWithFireEvent.min.mjs";import{wrapWithFixedAnchor as r}from"./wrapWithFixedAnchor.min.mjs";function l(n,i){const s=i.canvas,e=n[s.uniScaleKey];return s.uniformScaling&&!e||!s.uniformScaling&&e}function o(n,i,e){const t=s(n,"lockScalingX"),a=s(n,"lockScalingY");if(t&&a)return!0;if(!i&&(t||a)&&e)return!0;if(t&&"x"===i)return!0;if(a&&"y"===i)return!0;const{width:c,height:r,strokeWidth:l}=n;return 0===c&&0===l&&"y"!==i||0===r&&0===l&&"x"!==i}const g=["e","se","s","sw","w","nw","n","ne","e"],u=(s,e,t)=>{const a=l(s,t);if(o(t,0!==e.x&&0===e.y?"x":0===e.x&&0!==e.y?"y":"",a))return n;const c=i(t,e);return"".concat(g[c],"-resize")};function X(n,i,c,r){let g=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const u=i.target,X=g.by,Y=l(n,u);let f,y,h,m,x,S;if(o(u,X,Y))return!1;if(i.gestureScale)y=i.scaleX*i.gestureScale,h=i.scaleY*i.gestureScale;else{if(f=e(i,i.originX,i.originY,c,r),x="y"!==X?Math.sign(f.x||i.signX||1):1,S="x"!==X?Math.sign(f.y||i.signY||1):1,i.signX||(i.signX=x),i.signY||(i.signY=S),s(u,"lockScalingFlip")&&(i.signX!==x||i.signY!==S))return!1;if(m=u._getTransformedDimensions(),Y&&!X){const n=Math.abs(f.x)+Math.abs(f.y),{original:s}=i,e=n/(Math.abs(m.x*s.scaleX/u.scaleX)+Math.abs(m.y*s.scaleY/u.scaleY));y=s.scaleX*e,h=s.scaleY*e}else y=Math.abs(f.x*u.scaleX/m.x),h=Math.abs(f.y*u.scaleY/m.y);t(i)&&(y*=2,h*=2),i.signX!==x&&"y"!==X&&(i.originX=a(i.originX),y*=-1,i.signX=x),i.signY!==S&&"x"!==X&&(i.originY=a(i.originY),h*=-1,i.signY=S)}const b=u.scaleX,M=u.scaleY;return X?("x"===X&&u.set("scaleX",y),"y"===X&&u.set("scaleY",h)):(!s(u,"lockScalingX")&&u.set("scaleX",y),!s(u,"lockScalingY")&&u.set("scaleY",h)),b!==u.scaleX||M!==u.scaleY}const Y=(n,i,s,e)=>X(n,i,s,e),f=c("scaling",r(Y)),y=c("scaling",r(((n,i,s,e)=>X(n,i,s,e,{by:"x"})))),h=c("scaling",r(((n,i,s,e)=>X(n,i,s,e,{by:"y"}))));export{u as scaleCursorStyleHandler,l as scaleIsProportional,Y as scaleObjectFromCorner,f as scalingEqually,o as scalingIsForbidden,y as scalingX,h as scalingY};
//# sourceMappingURL=scale.min.mjs.map
