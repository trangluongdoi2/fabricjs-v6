import{defineProperty as t,objectWithoutProperties as r}from"../../_virtual/_rollupPluginBabelHelpers.min.mjs";import{BaseFilter as o}from"./BaseFilter.min.mjs";import{classRegistry as i}from"../ClassRegistry.min.mjs";import{fragmentSource as s}from"./shaders/colorMatrix.min.mjs";const a=["matrix"],e={matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0};class n extends o{setOptions(t){let{matrix:o}=t,i=r(t,a);o&&(this.matrix=[...o]),Object.assign(this,i)}getFragmentSource(){return s}applyTo2d(t){const r=t.imageData.data,o=this.matrix,i=this.colorsOnly;for(let t=0;t<r.length;t+=4){const s=r[t],a=r[t+1],e=r[t+2];if(i)r[t]=s*o[0]+a*o[1]+e*o[2]+255*o[4],r[t+1]=s*o[5]+a*o[6]+e*o[7]+255*o[9],r[t+2]=s*o[10]+a*o[11]+e*o[12]+255*o[14];else{const i=r[t+3];r[t]=s*o[0]+a*o[1]+e*o[2]+i*o[3]+255*o[4],r[t+1]=s*o[5]+a*o[6]+e*o[7]+i*o[8]+255*o[9],r[t+2]=s*o[10]+a*o[11]+e*o[12]+i*o[13]+255*o[14],r[t+3]=s*o[15]+a*o[16]+e*o[17]+i*o[18]+255*o[19]}}}getUniformLocations(t,r){return{uColorMatrix:t.getUniformLocation(r,"uColorMatrix"),uConstants:t.getUniformLocation(r,"uConstants")}}sendUniformData(t,r){const o=this.matrix,i=[o[0],o[1],o[2],o[3],o[5],o[6],o[7],o[8],o[10],o[11],o[12],o[13],o[15],o[16],o[17],o[18]],s=[o[4],o[9],o[14],o[19]];t.uniformMatrix4fv(r.uColorMatrix,!1,i),t.uniform4fv(r.uConstants,s)}}t(n,"type","ColorMatrix"),t(n,"defaults",e),i.setClass(n);export{n as ColorMatrix,e as colorMatrixDefaultValues};
//# sourceMappingURL=ColorMatrix.min.mjs.map
